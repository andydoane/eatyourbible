<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calming of the Sea Soundboard</title>

  <style>
    :root{
      --bg: #070b14;
      --panel: rgba(255,255,255,0.06);
      --panel-border: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --danger: #E55934;   /* playing highlight */
      --ring: rgba(99, 179, 237, 0.70);
      --shadow: 0 18px 50px rgba(0,0,0,0.55);
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }

    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(98,187,71,0.15), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(229,89,52,0.14), transparent 55%),
        var(--bg);
      color: var(--text);
      min-height: 100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }

    .app{
      width: min(820px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
      border: 1px solid var(--panel-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    header{
      padding: 18px 18px 10px;
      text-align: center;
    }

    h1{
      margin: 0 0 6px 0;
      font-size: clamp(20px, 2.4vw, 28px);
      letter-spacing: 0.2px;
    }

    .subtitle{
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
      max-width: 70ch;
      text-align: center;
    }

    main{
      padding: 14px 18px 18px;
    }

    /* 2x4 grid */
    .grid{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 12px;
    }

    .tile{
      border-radius: 16px;
      border: 1px solid var(--panel-border);
      background: rgba(255,255,255,0.04);
      overflow:hidden;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
    }

    .tile button{
      width: 100%;
      border: none;
      background: transparent;
      color: var(--text);
      padding: 16px 14px;
      cursor: pointer;
      display:flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      gap: 8px;
      font-weight: 800;
      -webkit-tap-highlight-color: transparent;
      min-height: 108px; /* keeps the grid even */
      transition: transform 120ms ease;
    }

    .tile button:active{ transform: translateY(1px) scale(0.99); }
    .tile button:focus-visible{
      outline: none;
      box-shadow: 0 0 0 4px var(--ring);
      border-radius: 16px;
    }

    .emoji{
      font-size: 30px;
      line-height: 1;
    }
    .name{
      font-size: 14px;
      letter-spacing: 0.2px;
      text-align: center;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      width: 100%;
      padding: 0 6px;
    }

    /* Playing state */
    .tile[data-state="playing"]{
      border-color: rgba(229,89,52,0.55);
      background: linear-gradient(180deg, rgba(229,89,52,0.18), rgba(255,255,255,0.03));
    }

    /* Stop All styling */
    .tile.stop{
      border-color: rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.06);
    }
    .tile.stop button{
      font-weight: 900;
    }

    footer{
      padding: 0 18px 16px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
    }

    @media (max-width: 380px){
      .tile button{ min-height: 96px; }
      .emoji{ font-size: 28px; }
      .name{ font-size: 13px; }
    }

    /* ===== Splash Screen ===== */
    .splash{
      position: fixed;
      inset: 0;
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(98,187,71,0.18), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(229,89,52,0.18), transparent 55%),
        var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 999;
      padding: 18px;
    }

    .start-btn{
      background: linear-gradient(180deg, rgba(255,255,255,0.18), rgba(255,255,255,0.08));
      border: 1px solid var(--panel-border);
      border-radius: 20px;
      padding: 22px 28px;
      color: var(--text);
      font-size: 18px;
      font-weight: 900;
      cursor: pointer;
      display: flex;
      flex-direction: column;
      gap: 10px;
      box-shadow: var(--shadow);
      min-width: min(420px, 92vw);
      text-align: center;
      -webkit-tap-highlight-color: transparent;
      transition: transform 120ms ease;
    }

    .start-btn:active{ transform: translateY(1px) scale(0.99); }

    .start-btn:focus-visible{
      outline: none;
      box-shadow: 0 0 0 4px var(--ring);
    }

    .start-btn .emoji{
      font-size: 40px;
      line-height: 1;
    }

    .start-sub{
      margin: 0;
      font-size: 13px;
      font-weight: 700;
      color: var(--muted);
      line-height: 1.35;
    }

    /* Optional fade-out */
    .splash.fade-out{
      animation: splashFade 260ms ease forwards;
    }
    @keyframes splashFade{
      to { opacity: 0; transform: translateY(6px); }
    }
  </style>
</head>

<body>
  <!-- Splash Screen -->
  <div id="splash" class="splash" aria-label="Start screen">
    <button id="startBtn" class="start-btn" type="button">
      <div class="emoji" aria-hidden="true">üéµ</div>
      <div>Open Soundboard</div>
      <p class="start-sub">
        Mobile browsers require a tap before audio can play.
      </p>
    </button>
  </div>

  <!-- Audio elements (directory = NT_10_sounds) -->
  <audio id="audio-1" preload="auto"><source src="NT_10_sounds/sound_1.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-2" preload="auto"><source src="NT_10_sounds/sound_2.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-3" preload="auto"><source src="NT_10_sounds/sound_3.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-4" preload="auto"><source src="NT_10_sounds/sound_4.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-5" preload="auto"><source src="NT_10_sounds/sound_5.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-6" preload="auto"><source src="NT_10_sounds/sound_6.mp3" type="audio/mpeg" /></audio>
  <audio id="audio-7" preload="auto"><source src="NT_10_sounds/sound_7.mp3" type="audio/mpeg" /></audio>

  <div class="app" id="app" hidden role="application" aria-label="Soundboard">
    <header>
      <h1>Calming of the Sea Soundboard</h1>
      <p class="subtitle">
        Sounds 1‚Äì5 toggle play/pause. Sounds 6‚Äì7 replay on every tap. Stop All silences everything.
      </p>
    </header>

    <main>
      <div class="grid" id="grid"></div>
    </main>

  </div>

  <script>
    // type:
    //  - "toggle" = play/pause (for sounds 1‚Äì5)
    //  - "oneshot" = restart + play every tap (for sounds 6‚Äì7)
    const sounds = [
      { id: 1, emoji: "üçÉ", name: "Gentle Wind",   type: "toggle" },
      { id: 2, emoji: "üí¶", name: "Gentle Waves",  type: "toggle" },
      { id: 3, emoji: "‚õµ", name: "Boat Creaking", type: "toggle" },
      { id: 4, emoji: "üí®", name: "Big Wind",      type: "toggle" },
      { id: 5, emoji: "üåä", name: "Big Waves",     type: "toggle" },
      { id: 6, emoji: "‚ö°", name: "Thunder 1",     type: "oneshot" },
      { id: 7, emoji: "‚ö°‚ö°", name: "Thunder 2",     type: "oneshot" },
    ];

    const grid = document.getElementById("grid");

    function tileHTML(s){
      return `
        <div class="tile" id="tile-${s.id}" data-state="idle">
          <button type="button" id="btn-${s.id}" aria-pressed="false">
            <div class="emoji" aria-hidden="true">${s.emoji}</div>
            <div class="name">${s.name}</div>
          </button>
        </div>
      `;
    }

    // Build 7 sound tiles + 1 Stop All tile = 2x4 grid
    grid.innerHTML =
      sounds.map(tileHTML).join("") +
      `
        <div class="tile stop" id="tile-stop" data-state="idle">
          <button type="button" id="stopAll">
            <div class="emoji" aria-hidden="true">‚õî</div>
            <div class="name">Stop All Sounds</div>
          </button>
        </div>
      `;

  function getAudio(id){ return document.getElementById(`audio-${id}`); }
  function getTile(id){ return document.getElementById(`tile-${id}`); }
  function getBtn(id){ return document.getElementById(`btn-${id}`); }


    function setPlayingUI(id, isPlaying){
      const tile = getTile(id);
      const btn = getBtn(id);
      if (!tile || !btn) return;
      tile.dataset.state = isPlaying ? "playing" : "idle";
      btn.setAttribute("aria-pressed", isPlaying ? "true" : "false");
    }

    function stopAndReset(id){
      const a = getAudio(id);
      if (!a) return;
      a.pause();
      a.currentTime = 0;
      setPlayingUI(id, false);
    }

    // ===== Splash / audio unlock =====
    const splash = document.getElementById("splash");
    const app = document.getElementById("app");
    const startBtn = document.getElementById("startBtn");

function unlockAudio(){
  for (const s of sounds) {
    const a = getAudio(s.id);
    if (!a) continue;

    // Fire-and-forget ‚Äî no await
    a.play()
      .then(() => {
        a.pause();
        a.currentTime = 0;
      })
      .catch(() => {
        // ignored on purpose
      });
  }
}


startBtn.addEventListener("click", () => {
  unlockAudio();

  // Show app immediately (don't wait on audio promises)
  splash.classList.add("fade-out");
  window.setTimeout(() => {
    splash.remove();
    app.hidden = false;
  }, 260);
});


    // ===== Wire sound buttons =====
    sounds.forEach((s) => {
      const btn = getBtn(s.id);
      const audio = getAudio(s.id);

      audio.addEventListener("ended", () => {
        if (s.type === "toggle") setPlayingUI(s.id, false);
      });

      btn.addEventListener("click", async () => {
        try {
          if (s.type === "toggle") {
            if (audio.paused) {
              await audio.play();
              setPlayingUI(s.id, true);
            } else {
              audio.pause();
              setPlayingUI(s.id, false);
            }
          } else {
            audio.currentTime = 0;
            await audio.play();
            // quick flash for oneshot
            setPlayingUI(s.id, true);
            window.setTimeout(() => setPlayingUI(s.id, false), 220);
          }
        } catch (err) {
          console.warn("Audio play failed:", err);
        }
      });
    });

    // Stop All as 8th button
    document.getElementById("stopAll").addEventListener("click", () => {
      sounds.forEach((s) => stopAndReset(s.id));
    });
  </script>
</body>
</html>
