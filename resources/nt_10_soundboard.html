<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Calming of the Sea Soundboard</title>

  <style>
    :root{
      --bg: #0b1220;
      --card: rgba(255,255,255,0.06);
      --card-border: rgba(255,255,255,0.10);
      --text: rgba(255,255,255,0.92);
      --muted: rgba(255,255,255,0.70);
      --accent: #62BB47;   /* idle */
      --danger: #E55934;   /* playing */
      --stop: rgba(255,255,255,0.14);
      --stop-border: rgba(255,255,255,0.18);
      --ring: rgba(99, 179, 237, 0.65);
      --shadow: 0 18px 50px rgba(0,0,0,0.45);
      --radius: 18px;
    }

    @media (prefers-color-scheme: light){
      :root{
        --bg: #f5f7fb;
        --card: rgba(0,0,0,0.04);
        --card-border: rgba(0,0,0,0.08);
        --text: rgba(0,0,0,0.88);
        --muted: rgba(0,0,0,0.60);
        --stop: rgba(0,0,0,0.06);
        --stop-border: rgba(0,0,0,0.10);
        --shadow: 0 18px 50px rgba(0,0,0,0.12);
      }
    }

    * { box-sizing: border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      background:
        radial-gradient(1200px 600px at 20% 0%, rgba(98,187,71,0.20), transparent 60%),
        radial-gradient(900px 500px at 90% 20%, rgba(229,89,52,0.18), transparent 55%),
        var(--bg);
      color: var(--text);
      min-height: 100svh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 18px;
    }

    .app{
      width: min(980px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,0.06), rgba(255,255,255,0.03));
      border: 1px solid var(--card-border);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow: hidden;
    }

    header{
      padding: 18px 18px 10px;
      display:flex;
      gap: 12px;
      align-items:flex-start;
      justify-content: space-between;
      flex-wrap: wrap;
    }

    .title{
      display:flex;
      flex-direction:column;
      gap: 6px;
    }
    h1{
      margin: 0;
      font-size: clamp(20px, 2.4vw, 28px);
      letter-spacing: 0.2px;
    }
    .subtitle{
      margin: 0;
      color: var(--muted);
      font-size: 14px;
      line-height: 1.35;
      max-width: 70ch;
    }

    .top-actions{
      display:flex;
      gap: 10px;
      align-items:center;
      margin-left:auto;
    }

    .btn{
      border: 1px solid rgba(255,255,255,0.10);
      background: var(--card);
      color: var(--text);
      border-radius: 14px;
      padding: 12px 14px;
      font-weight: 650;
      font-size: 14px;
      cursor: pointer;
      transition: transform 120ms ease, background 120ms ease, border-color 120ms ease, box-shadow 120ms ease, filter 120ms ease;
      user-select: none;
      -webkit-tap-highlight-color: transparent;
    }
    .btn:active{ transform: translateY(1px) scale(0.99); }
    .btn:focus-visible{
      outline: none;
      box-shadow: 0 0 0 4px var(--ring);
    }

    .btn-stop{
      background: var(--stop);
      border-color: var(--stop-border);
      font-weight: 800;
    }

    main{
      padding: 14px 18px 18px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
      gap: 12px;
    }

    .sound{
      position: relative;
      border-radius: 16px;
      border: 1px solid var(--card-border);
      background: rgba(255,255,255,0.04);
      overflow:hidden;
    }

    .sound button{
      width: 100%;
      border: none;
      background: transparent;
      color: var(--text);
      text-align: left;
      padding: 14px 14px 14px 14px;
      cursor: pointer;
      display:flex;
      align-items:center;
      justify-content: space-between;
      gap: 10px;
      font-weight: 750;
      font-size: 15px;
      letter-spacing: 0.2px;
    }

    .sound button:focus-visible{
      outline: none;
      box-shadow: 0 0 0 4px var(--ring);
    }

    .pill{
      font-size: 12px;
      font-weight: 800;
      padding: 6px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(255,255,255,0.08);
      color: var(--muted);
      flex: 0 0 auto;
    }

    /* Idle vs Playing state */
    .sound[data-state="idle"]{
      box-shadow: inset 0 0 0 1px rgba(255,255,255,0.02);
    }
    .sound[data-state="playing"]{
      border-color: rgba(229,89,52,0.55);
      background: linear-gradient(180deg, rgba(229,89,52,0.18), rgba(255,255,255,0.03));
    }
    .sound[data-state="playing"] .pill{
      border-color: rgba(229,89,52,0.50);
      color: rgba(255,255,255,0.88);
      background: rgba(229,89,52,0.22);
    }

    .sound button .label{
      display:flex;
      flex-direction:column;
      gap: 2px;
      min-width: 0;
    }
    .sound button .label .name{
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    .sound button .label .hint{
      font-size: 12px;
      color: var(--muted);
      font-weight: 650;
    }

    footer{
      padding: 0 18px 16px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.35;
    }

    @media (max-width: 420px){
      .top-actions{ width: 100%; }
      .btn-stop{ width: 100%; }
      .subtitle{ font-size: 13px; }
    }
  </style>
</head>

<body>
  <!-- Audio elements (directory updated to NT_09_sounds) -->
  <audio id="audio-1" preload="auto">
    <source src="NT_09_sounds/sound_1.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-2" preload="auto">
    <source src="NT_09_sounds/sound_2.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-3" preload="auto">
    <source src="NT_09_sounds/sound_3.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-4" preload="auto">
    <source src="NT_09_sounds/sound_4.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-5" preload="auto">
    <source src="NT_09_sounds/sound_5.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-6" preload="auto">
    <source src="NT_09_sounds/sound_6.mp3" type="audio/mpeg" />
  </audio>
  <audio id="audio-7" preload="auto">
    <source src="NT_09_sounds/sound_7.mp3" type="audio/mpeg" />
  </audio>

  <div class="app" role="application" aria-label="Soundboard">
    <header>
      <div class="title">
        <h1>Calming of the Sea Soundboard</h1>
        <p class="subtitle">
          Tap a sound to play. Ambient sounds toggle on/off. Thunder buttons replay on every tap.
          Use <strong>Stop All</strong> to immediately silence everything.
        </p>
      </div>

      <div class="top-actions">
        <button class="btn btn-stop" type="button" id="stopAll">‚õî Stop All</button>
      </div>
    </header>

    <main>
      <div class="grid" id="grid"></div>
    </main>

    <footer>
      Tip: On iOS/Android, sound won‚Äôt play until you tap a button once (browser autoplay rules).
    </footer>
  </div>

  <script>
    // Configure your buttons here (text + emoji)
    // type:
    //  - "toggle" = play/pause (for sounds 1‚Äì5)
    //  - "oneshot" = restart + play every tap (for sounds 6‚Äì7)
    const SOUND_DIR = "NT_09_sounds";

    const sounds = [
      { id: 1, file: "sound_1.mp3", label: "üçÉ Gentle Wind",   hint: "toggle",  type: "toggle" },
      { id: 2, file: "sound_2.mp3", label: "üåä Gentle Waves",  hint: "toggle",  type: "toggle" },
      { id: 3, file: "sound_3.mp3", label: "ü™µ Boat Creaking",  hint: "toggle",  type: "toggle" },
      { id: 4, file: "sound_4.mp3", label: "üí® Big Wind",      hint: "toggle",  type: "toggle" },
      { id: 5, file: "sound_5.mp3", label: "üåä Big Waves",     hint: "toggle",  type: "toggle" },
      { id: 6, file: "sound_6.mp3", label: "‚ö° Thunder 1",     hint: "replay",  type: "oneshot" },
      { id: 7, file: "sound_7.mp3", label: "‚ö° Thunder 2",     hint: "replay",  type: "oneshot" },
    ];

    // Build the UI
    const grid = document.getElementById("grid");

    function soundCardHTML(s) {
      return `
        <div class="sound" id="card-${s.id}" data-state="idle">
          <button type="button" id="btn-${s.id}" aria-pressed="false">
            <span class="label">
              <span class="name">${s.label}</span>
              <span class="hint">${s.type === "toggle" ? "Tap to play/pause" : "Tap to replay"}</span>
            </span>
            <span class="pill">${s.hint}</span>
          </button>
        </div>
      `;
    }

    grid.innerHTML = sounds.map(soundCardHTML).join("");

    // Helpers
    function getAudio(id) {
      return document.getElementById(`audio-${id}`);
    }
    function getCard(id) {
      return document.getElementById(`card-${id}`);
    }
    function getBtn(id) {
      return document.getElementById(`btn-${id}`);
    }

    function setPlayingUI(id, isPlaying) {
      const card = getCard(id);
      const btn = getBtn(id);
      card.dataset.state = isPlaying ? "playing" : "idle";
      btn.setAttribute("aria-pressed", isPlaying ? "true" : "false");
    }

    function stopAndReset(id) {
      const a = getAudio(id);
      a.pause();
      a.currentTime = 0;
      setPlayingUI(id, false);
    }

    // Wire up button behavior to match your original logic
    sounds.forEach((s) => {
      const btn = getBtn(s.id);
      const audio = getAudio(s.id);

      // If a toggle sound naturally ends, reflect that in the UI.
      audio.addEventListener("ended", () => {
        if (s.type === "toggle") setPlayingUI(s.id, false);
      });

      btn.addEventListener("click", async () => {
        try {
          if (s.type === "toggle") {
            if (audio.paused) {
              await audio.play();
              setPlayingUI(s.id, true);
            } else {
              audio.pause();
              setPlayingUI(s.id, false);
            }
          } else {
            audio.currentTime = 0;
            await audio.play();
            // oneshot doesn't stay "playing" in UI; give a quick flash:
            setPlayingUI(s.id, true);
            window.setTimeout(() => setPlayingUI(s.id, false), 250);
          }
        } catch (err) {
          // Most common cause: autoplay restrictions or missing file path
          console.warn("Audio play failed:", err);
        }
      });
    });

    // Stop all button
    document.getElementById("stopAll").addEventListener("click", () => {
      sounds.forEach((s) => stopAndReset(s.id));
    });
  </script>
</body>
</html>
