<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Ten Commandments Flashcards</title>
  <style>
    :root{
      --bg: #0b1220;
      --card: rgba(255,255,255,0.08);
      --card2: rgba(255,255,255,0.10);
      --text: #f5f7ff;
      --muted: rgba(245,247,255,0.75);
      --border: rgba(255,255,255,0.14);
      --shadow: 0 20px 50px rgba(0,0,0,0.35);
      --yes: #1f9d55;
      --no: #d64545;
      --accent: #7aa7ff;
      --radius: 22px;
      --maxW: 540px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body{
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1000px 600px at 30% 10%, rgba(122,167,255,0.22), transparent 60%),
        radial-gradient(800px 600px at 70% 90%, rgba(122,255,214,0.10), transparent 55%),
        var(--bg);
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
    }

    /* Portrait-first app container */
    .app{
      width: min(100%, var(--maxW));
      height: 100%;
      max-height: 980px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      padding: 16px;
    }

    .frame{
      width: 100%;
      height: 100%;
      border: 1px solid var(--border);
      border-radius: var(--radius);
      background: rgba(255,255,255,0.06);
      box-shadow: var(--shadow);
      overflow: hidden;
      display: grid;
      grid-template-rows: auto 1fr auto;
    }

    header{
      padding: 18px 18px 10px;
      border-bottom: 1px solid rgba(255,255,255,0.08);
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 12px;
    }

    .title{
      font-weight: 750;
      letter-spacing: 0.06em;
      font-size: 14px;
      color: var(--muted);
      text-transform: uppercase;
      display: flex;
      align-items: center;
      gap: 10px;
      flex-wrap: wrap;
    }

    .pill{
      font-size: 12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.14);
      background: rgba(0,0,0,0.12);
      color: rgba(245,247,255,0.85);
      white-space: nowrap;
    }

    main{
      padding: 18px;
      display: flex;
      flex-direction: column;
      gap: 14px;
      justify-content: center;
      align-items: center;
      text-align: center;
      position: relative;
    }


      .hint{
        font-size: 14px;
        color: var(--muted);
        line-height: 1.35;
        text-align: center;
        text-wrap: balance;
        max-width: 42ch;
        margin-left: auto;
        margin-right: auto;
      }



    .big{
      font-size: clamp(22px, 3.4vw, 30px);
      font-weight: 800;
      letter-spacing: 0.02em;
    }



    .titleImage{
      width: 100%;
      max-width: 320px;
      height: auto;
      margin-bottom: 12px;
    }

    
    .sub{
      font-size: 15px;
      color: var(--muted);
      line-height: 1.45;
      max-width: 40ch;
      text-align: center;
      margin-left: auto;
      margin-right: auto;
      text-wrap: balance;

    }


    .btnrow{
      display: flex;
      gap: 10px;
      justify-content: center;
      flex-wrap: wrap;
      margin-top: 10px;
    }

    button{
      appearance: none;
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.10);
      color: var(--text);
      font-weight: 700;
      border-radius: 14px;
      padding: 12px 14px;
      cursor: pointer;
      transition: transform 0.05s ease, background 0.2s ease, border-color 0.2s ease;
      min-width: 140px;
      font-size: 15px;
    }
    button:active{ transform: translateY(1px) scale(0.99); }
    button:hover{ background: rgba(255,255,255,0.14); }

    .primary{
      border-color: rgba(122,167,255,0.45);
      background: rgba(122,167,255,0.18);
    }
    .primary:hover{ background: rgba(122,167,255,0.25); }

    .yes{
      border-color: rgba(31,157,85,0.55);
      background: rgba(31,157,85,0.22);
      min-width: 120px;
    }
    .yes:hover{ background: rgba(31,157,85,0.30); }

    .no{
      border-color: rgba(214,69,69,0.55);
      background: rgba(214,69,69,0.22);
      min-width: 120px;
    }
    .no:hover{ background: rgba(214,69,69,0.30); }

    .smallbtn{
      min-width: 0;
      padding: 10px 12px;
      font-size: 14px;
      border-radius: 12px;
    }

    /* Card flip */
    .cardWrap{
      width: min(440px, 100%);
      aspect-ratio: 3 / 4; /* portrait card */
      perspective: 1200px;
      user-select: none;
      position: relative;

      /* ensure it's truly centered */
      margin-left: auto;
      margin-right: auto;
    }


    .card{
      width: 100%;
      height: 100%;
      border-radius: 18px;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 650ms cubic-bezier(.2,.8,.2,1);
      border: 1px solid rgba(255,255,255,0.16);
      background: rgba(255,255,255,0.08);
      box-shadow: 0 14px 40px rgba(0,0,0,0.32);
      overflow: hidden;
      cursor: pointer;
    }

    .card.flipped{
      transform: rotateY(180deg);
    }

    .face{
      position: absolute;
      inset: 0;
      backface-visibility: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 14px;
    }

    .front{
      background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(0,0,0,0.10));
      display: flex;
      align-items: center;
      justify-content: center;
    }


    .front img{
      width: 100%;
      height: 100%;
      display: block;
      object-fit: contain;
      object-position: center center;
      border-radius: 14px;
      filter: drop-shadow(0 10px 20px rgba(0,0,0,0.35));
    }



    .back{
      transform: rotateY(180deg);
      background: linear-gradient(180deg, rgba(122,167,255,0.16), rgba(0,0,0,0.12));
      padding: 22px;
    }


    .revealArea{
      width: 100%;
      max-width: 540px;
      display: none;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      margin-top: 4px;
    }
    .revealArea.show{ display: flex; }

    .question{
      font-size: 15px;
      color: rgba(245,247,255,0.90);
      font-weight: 750;
      margin-top: 4px;
    }

    .scoreBox{
      width: 100%;
      max-width: 520px;
      border-radius: 18px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.14);
      padding: 18px 16px;
      display: flex;
      flex-direction: column;
      gap: 10px;
      align-items: center;
      box-shadow: 0 14px 40px rgba(0,0,0,0.25);
      margin-top: 14px;
      margin-bottom: 28px;
    }

    .scoreNum{
      font-size: clamp(44px, 7vw, 64px);
      font-weight: 900;
      letter-spacing: -0.03em;
    }

    .scoreMsg{
      font-size: 16px;
      color: rgba(245,247,255,0.88);
      line-height: 1.45;
      max-width: 46ch;
      text-wrap: balance;
    }


    /* Show note in landscape */
    @media (orientation: landscape){
      .cardWrap{ max-width: 360px; }
    }

    /* Gentle motion reduction */
    @media (prefers-reduced-motion: reduce){
      .card{ transition: none; }
      button{ transition: none; }
    }

    /* Utility */
    .hidden{ display:none !important; }

    /* Confetti overlay canvas */
    .confettiCanvas{
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      z-index: 20;
    }
       
    
    /* Back label (since we removed the commandment text from the card back) */
    .backLabel{
      font-size: 18px;
      font-weight: 900;
      letter-spacing: 0.02em;
      color: rgba(245,247,255,0.90);
      padding: 12px 14px;
      border-radius: 16px;
      background: rgba(0,0,0,0.18);
      border: 1px solid rgba(255,255,255,0.14);
    }
    
    /* Explode + disappear effect */
    .card.vanish{
      animation: vanishPop 520ms ease-out forwards;
    }
    
    @keyframes vanishPop{
      0%   { transform: rotateY(180deg) scale(1); opacity: 1; }
      55%  { transform: rotateY(180deg) scale(1.08); opacity: 1; }
      100% { transform: rotateY(180deg) scale(0.10); opacity: 0; }
    }

    /* The answer that appears in the SAME card space (behind the vanishing card) */
    .answerCard{
    position: absolute;
    inset: 0;
    border-radius: 18px;
    border: 1px solid rgba(255,255,255,0.16);
    background: linear-gradient(180deg, rgba(122,167,255,0.16), rgba(0,0,0,0.12));
    box-shadow: 0 14px 40px rgba(0,0,0,0.32);
    display: flex;
    flex-direction: column;

    align-items: center;
    justify-content: center;
    padding: 22px;
    text-align: center;
    z-index: 0; /* behind the .card */
    }

    #answerText{
    font-size: clamp(22px, 3.4vw, 30px);
    font-weight: 900;
    line-height: 1.2;
    letter-spacing: 0.01em;

    /* ‚ÄúSmart wrap‚Äù / balanced line breaks */
    text-wrap: balance;

    /* Helps the wrap feel nicely sized on mobile */
    max-width: 18ch;

    padding: 0;
    border-radius: 0;
    background: transparent;
    border: none;

    }

    /* Make sure the flipping card sits above the answer */
    .card{
    position: relative;
    z-index: 1;
    }

    /* Read-it-to-me button inside the answer card */
    .readBtn{
    margin-top: 14px;
    padding: 10px 16px;
    border-radius: 14px;
    font-size: 16px;
    font-weight: 800;
    border: 1px solid rgba(255,255,255,0.25);
    background: rgba(122,167,255,0.22);
    color: var(--text);
    cursor: pointer;
    }

    .readBtn:hover{
    background: rgba(122,167,255,0.32);
    }

    .readBtn:active{
    transform: scale(0.97);
    }

    .imgLoading{
  visibility: hidden;
    }

    #tapHint{
    font-size: 16px;
    }

    .rulesText{
    font-size: 17px;
    line-height: 1.55;
    }

    
  </style>
</head>

<body>
  <div class="app">
    <div class="frame" role="application" aria-label="Ten Commandments Flashcards">
      <header>
        <div class="title">
          <span id="headerTitle">Commandment Quiz</span>
          <span class="pill" id="progressPill">Ready</span>
        </div>
        <div class="pill" id="scorePill">Score: 0</div>
      </header>

      <main>
        <canvas id="confettiCanvas" class="confettiCanvas hidden"></canvas>

        
        <!-- SPLASH -->
        <section id="screenSplash">
          <img
            src="topten_images/top_ten_title.png"
            alt="Ten Commandments"
            class="titleImage"
          />

          <div class="big">Best in vertical mode</div>
          <div class="sub">
            Turn your device to portrait mode before beginning.
          </div>
          <div class="btnrow" style="margin-top:14px;">
            <button class="primary" id="btnStart">Tap to start</button>
          </div>
        </section>

        <!-- RULES SCREEN -->
        <section id="screenRules" class="hidden">
        <img
            src="topten_images/top_ten_title.png"
            alt="Ten Commandments"
            class="titleImage"
        />

        <div class="sub rulesText" style="margin-top:6px;">
            You‚Äôll see a picture of a commandment. Try to say the commandment, then tap the picture to reveal the answer. Mark your guess as right or wrong to keep track of your progress.
        </div>


        <div class="btnrow" style="margin-top:14px;">
            <button class="primary" id="btnGotIt">Got It!</button>
        </div>
        </section>


        <!-- GAME -->
        <section id="screenGame" class="hidden" style="width:100%;">
            <div class="cardWrap" aria-label="Flashcard">
            <div class="answerCard hidden" id="answerCard" aria-hidden="true">
            <div id="answerText">Commandment text goes here</div>

            <button class="readBtn" id="readBtn">
                üîä Read it to me
            </button>
            </div>


            <div class="card" id="flashcard" tabindex="0" role="button" aria-pressed="false" aria-label="Tap to reveal answer">
                <div class="face front">
                <img id="cmdImage" src="topten_images/top_ten_1.png" alt="Commandment image" />
                </div>
                <div class="face back">
                <div class="backLabel">Revealed!</div>
                </div>
            </div>
            </div>


          
          <div class="hint" id="tapHint" style="margin-top: 10px;">Tap the image to reveal answer.</div>

          <div class="revealArea" id="revealArea">
            <div class="question">Did you guess correctly?</div>
            <div class="btnrow">
              <button class="yes" id="btnYes">Yes</button>
              <button class="no" id="btnNo">No</button>
            </div>
          </div>
        </section>

        <!-- SCORE -->
        <section id="screenScore" class="hidden">
          <div class="big">Your Score</div>
          <div class="scoreBox">
            <div class="scoreNum" id="finalScore">0/10</div>
            <div class="scoreMsg" id="finalMsg">Message here</div>
          </div>
          <div class="btnrow" style="margin-top:14px;">
            <button class="primary" id="btnRestart">Continue</button>
          </div>
        </section>

        <!-- BEST NEWS EVER -->
        <section id="screenBestNews" class="hidden">
            <a href="https://www.eatyourbible.com/gospel">
            <img
                src="topten_images/best_news_ever_title.png"
                alt="Best News Ever"
                class="titleImage"
                style="cursor:pointer;"
            />
            </a>


        <div class="sub" style="margin-top:6px;">
            Learn more about God and his commands.
        </div>

        <div class="btnrow" style="margin-top:14px;">
            <button class="primary" id="btnBestNews">Best News Ever</button>
            <button id="btnBackToTitle">Back to Title</button>
        </div>
        </section>


      </main>


    </div>
  </div>

  <script>
    /***********************
     * DATA (Ten Commandments)
     ***********************/
    const commandments = [
      { num: 1, text: "You shall have no other gods before me." },
      { num: 2, text: "You shall not make for yourself an image... You shall not bow down to them or worship them." },
      { num: 3, text: "You shall not misuse the name of the Lord your God." },
      { num: 4, text: "Remember the Sabbath day by keeping it holy. Six days you shall labor and do all your work, but the seventh day is a sabbath to the Lord your God." },
      { num: 5, text: "Honor your father and your mother." },
      { num: 6, text: "You shall not murder." },
      { num: 7, text: "You shall not commit adultery." },
      { num: 8, text: "You shall not steal." },
      { num: 9, text: "You shall not give false testimony against your neighbor (Do not lie)." },
      { num: 10, text: "You shall not covet... anything that belongs to your neighbor." }
    ];

    const encouragementByScore = [
      "That‚Äôs okay! Every journey starts somewhere. Try again and watch your score grow!",
      "Nice start! You learned at least one today ‚Äî keep going!",
      "Good progress! Two commands down, eight to go!",
      "Solid effort! You're starting to get it!",
      "Nice! You‚Äôre nearly halfway ‚Äî keep practicing!",
      "Halfway there! Just five more to learn.",
      "Great work! You know more than half ‚Äî keep it up!",
      "Impressive! You‚Äôre doing really well.",
      "Excellent! You‚Äôre so close to a perfect score!",
      "Amazing! Just one more for perfection ‚Äî so close!",
      "Perfect! Outstanding work ‚Äî you really know the Ten Commandments!"
    ];

    /***********************
     * SIMPLE PROCEDURAL AUDIO (Yes / No)
     ***********************/
    let audioCtx = null;
    let masterGain = null;

    function initAudio(){
      if(audioCtx) return;

      audioCtx = new (window.AudioContext || window.webkitAudioContext)();
      masterGain = audioCtx.createGain();
      masterGain.gain.value = 0.6;
      masterGain.connect(audioCtx.destination);
    }

    function playYes3(){
      initAudio();

      const t = audioCtx.currentTime;
      const base = 660;
      const notes = [base, base * 1.25, base * 1.5];

      notes.forEach((freq, i) => {
        const osc = audioCtx.createOscillator();
        osc.type = "sine";
        osc.frequency.setValueAtTime(freq, t + i * 0.09);

        const gain = audioCtx.createGain();
        gain.gain.setValueAtTime(0.0001, t + i * 0.09);
        gain.gain.exponentialRampToValueAtTime(0.4, t + i * 0.09 + 0.01);
        gain.gain.exponentialRampToValueAtTime(0.0001, t + i * 0.09 + 0.12);

        osc.connect(gain);
        gain.connect(masterGain);

        osc.start(t + i * 0.09);
        osc.stop(t + i * 0.09 + 0.14);
      });
    }

    function playNo1(){
      initAudio();

      const t = audioCtx.currentTime;

      const osc = audioCtx.createOscillator();
      osc.type = "sawtooth";
      osc.frequency.setValueAtTime(120, t);

      const filter = audioCtx.createBiquadFilter();
      filter.type = "lowpass";
      filter.frequency.value = 700;

      const gain = audioCtx.createGain();
      gain.gain.setValueAtTime(0.0001, t);
      gain.gain.exponentialRampToValueAtTime(0.55, t + 0.01);
      gain.gain.exponentialRampToValueAtTime(0.0001, t + 0.45);

      osc.connect(filter);
      filter.connect(gain);
      gain.connect(masterGain);

      osc.start(t);
      osc.stop(t + 0.48);
    }


    /***********************
     * STATE
     ***********************/
    let idx = 0;
    let audioPlayer = null;

    let correct = 0;
    let revealed = false;

    /***********************
     * ELEMENTS
     ***********************/
    const screenSplash = document.getElementById("screenSplash");
    const screenRules = document.getElementById("screenRules");
    const btnGotIt = document.getElementById("btnGotIt");

    const screenGame = document.getElementById("screenGame");
    const screenScore = document.getElementById("screenScore");
    const screenBestNews = document.getElementById("screenBestNews");


    const headerTitle = document.getElementById("headerTitle");
    const progressPill = document.getElementById("progressPill");
    const scorePill = document.getElementById("scorePill");

    const cmdImage = document.getElementById("cmdImage");

    const answerCard = document.getElementById("answerCard");
    const answerText = document.getElementById("answerText");
    const readBtn = document.getElementById("readBtn");

    const confettiCanvas = document.getElementById("confettiCanvas");

    const tapHint = document.getElementById("tapHint");

    const flashcard = document.getElementById("flashcard");
    const revealArea = document.getElementById("revealArea");

    const btnStart = document.getElementById("btnStart");
    const btnYes = document.getElementById("btnYes");
    const btnNo = document.getElementById("btnNo");
    const btnRestart = document.getElementById("btnRestart");
    const btnBestNews = document.getElementById("btnBestNews");
    const btnBackToTitle = document.getElementById("btnBackToTitle");


    const finalScore = document.getElementById("finalScore");
    const finalMsg = document.getElementById("finalMsg");

    /***********************
     * HELPERS (simple, no complicated stuff needed to edit later)
     ***********************/
    function updateScorePill(){
      scorePill.textContent = "Score: " + correct;
    }

    function showScreen(which){
        // which: "splash" | "rules" | "game" | "score" | "bestnews"
        screenSplash.classList.add("hidden");
        screenRules.classList.add("hidden");
        screenGame.classList.add("hidden");
        screenScore.classList.add("hidden");
        screenBestNews.classList.add("hidden");

        if(which === "splash") screenSplash.classList.remove("hidden");
        if(which === "rules") screenRules.classList.remove("hidden");
        if(which === "game") screenGame.classList.remove("hidden");
        if(which === "score") screenScore.classList.remove("hidden");
        if(which === "bestnews") screenBestNews.classList.remove("hidden");
    }



    function resetCardToFront(){
      flashcard.classList.remove("flipped");
      flashcard.classList.remove("vanish");
      flashcard.style.pointerEvents = "auto";
      flashcard.style.visibility = "visible";
      flashcard.style.opacity = "1";
    
      flashcard.setAttribute("aria-pressed", "false");
      revealed = false;
    
      answerCard.classList.add("hidden");
      answerCard.setAttribute("aria-hidden", "true");

      revealArea.classList.remove("show");
      tapHint.classList.remove("hidden");
    }


    function loadCommandment(i){
    const item = commandments[i];

    // Reset the UI first (so we‚Äôre back to the ‚Äúfront‚Äù state)
    resetCardToFront();

    answerText.textContent = item.text;

    progressPill.textContent = (i + 1) + " / " + commandments.length;
    headerTitle.textContent = "Progress";

    // Hide the image until the new one is fully loaded
    cmdImage.classList.add("imgLoading");

    const newSrc = "topten_images/top_ten_" + item.num + ".png";
    const preloader = new Image();

    preloader.onload = () => {
        cmdImage.src = newSrc;
        cmdImage.alt = "Commandment " + item.num + " image";
        cmdImage.classList.remove("imgLoading");
    };

    preloader.onerror = () => {
        // If it fails, still try to show something rather than staying hidden
        cmdImage.src = newSrc;
        cmdImage.alt = "Commandment " + item.num + " image";
        cmdImage.classList.remove("imgLoading");
    };

    preloader.src = newSrc;
    }


    function resizeConfettiCanvas(){
      const rect = confettiCanvas.getBoundingClientRect();
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      confettiCanvas.width = Math.floor(rect.width * dpr);
      confettiCanvas.height = Math.floor(rect.height * dpr);
    }
    
    function runConfettiBurst(durationMs = 650){
      confettiCanvas.classList.remove("hidden");
      resizeConfettiCanvas();
    
      const ctx = confettiCanvas.getContext("2d");
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
    
      const w = confettiCanvas.getBoundingClientRect().width;
      const h = confettiCanvas.getBoundingClientRect().height;
    
      // Burst near the flashcard center
      const cardRect = flashcard.getBoundingClientRect();
      const canvasRect = confettiCanvas.getBoundingClientRect();
      const originX = (cardRect.left + cardRect.width / 2) - canvasRect.left;
      const originY = (cardRect.top + cardRect.height / 2) - canvasRect.top;
    
      const pieces = [];
      const count = 120;
    
      for(let i=0;i<count;i++){
        const angle = Math.random() * Math.PI * 2;
        const speed = 3 + Math.random() * 6;
        pieces.push({
          x: originX,
          y: originY,
          vx: Math.cos(angle) * speed,
          vy: Math.sin(angle) * speed - (2 + Math.random() * 3),
          r: 2 + Math.random() * 3,
          rot: Math.random() * Math.PI,
          vr: (Math.random() - 0.5) * 0.25,
          life: 0,
          ttl: 50 + Math.random() * 40
        });
      }
    
      let frame = 0;
      const gravity = 0.18;
    
      function tick(){
        frame++;
        ctx.clearRect(0,0,w,h);
    
        for(const p of pieces){
          p.life++;
          p.vy += gravity;
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vr;
    
          // Simple alpha fade
          const alpha = Math.max(0, 1 - (p.life / p.ttl));
          ctx.globalAlpha = alpha;
    
          // Random bright-ish colors using HSL (looks like confetti)
          const hue = (p.life * 7 + (p.x + p.y)) % 360;
          ctx.fillStyle = `hsl(${hue} 85% 60%)`;
    
          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillRect(-p.r, -p.r, p.r*2.2, p.r*1.4);
          ctx.restore();
        }
    
        ctx.globalAlpha = 1;
    
        // Stop after duration or when all pieces are basically done
        const done = pieces.every(p => p.life >= p.ttl);
        if(done){
          confettiCanvas.classList.add("hidden");
          ctx.clearRect(0,0,w,h);
          return;
        }
        requestAnimationFrame(tick);
      }
    
      requestAnimationFrame(tick);
    }

    
    function reveal(){
      if(revealed) return;
      revealed = true;
    
      // Flip first
      flashcard.classList.add("flipped");
      flashcard.setAttribute("aria-pressed", "true");
      tapHint.classList.add("hidden");
    
      // After the flip, confetti + vanish + show answer
      setTimeout(() => {
        runConfettiBurst(650);
    
        // vanish animation
        flashcard.classList.add("vanish");
        flashcard.style.pointerEvents = "none";
    
        // reveal the commandment text underneath
        answerCard.classList.remove("hidden");
        answerCard.setAttribute("aria-hidden", "false");

    
        // show the yes/no buttons too
        revealArea.classList.add("show");
      }, 520);
    }


    function advance(){
      idx += 1;
      if(idx >= commandments.length){
        showFinalScore();
      }else{
        loadCommandment(idx);
      }
    }

    function showFinalScore(){
      showScreen("score");
      progressPill.textContent = "Finished";
      headerTitle.textContent = "Results";
      finalScore.textContent = correct + "/10";
      finalMsg.textContent = encouragementByScore[correct] || "Great job!";
    }

    async function goFullscreen(){
      // Try fullscreen (may fail on iOS Safari unless user gesture + video, etc.)
      const el = document.documentElement;
      try{
        if(el.requestFullscreen) await el.requestFullscreen();
        else if(el.webkitRequestFullscreen) await el.webkitRequestFullscreen();
      }catch(e){
        // It's okay if it fails; the game still works.
      }
    }

    function startGame(){
      idx = 0;
      correct = 0;
      updateScorePill();
      showScreen("game");
      loadCommandment(idx);
    }

    /***********************
     * EVENTS
     ***********************/
    btnStart.addEventListener("click", async () => {
    await goFullscreen();
    showScreen("rules");
    });

    btnGotIt.addEventListener("click", () => {
        startGame();
    });


    flashcard.addEventListener("click", () => {
      reveal();
    });

    readBtn.addEventListener("click", () => {
  // Stop any audio already playing
  if(audioPlayer){
    audioPlayer.pause();
    audioPlayer.currentTime = 0;
  }

  // Commandments are 1‚Äì10, idx is 0‚Äì9
  const audioNumber = idx + 1;
  const audioPath = "topten_sounds/topten_" + audioNumber + ".mp3";

  audioPlayer = new Audio(audioPath);
  audioPlayer.play();
});


    // Allow keyboard "Enter/Space" if someone uses a keyboard
    flashcard.addEventListener("keydown", (e) => {
      if(e.key === "Enter" || e.key === " "){
        e.preventDefault();
        reveal();
      }
    });

    btnYes.addEventListener("click", () => {
      if(!revealed) return;
      playYes3();
      correct += 1;
      updateScorePill();
      advance();
    });


    btnNo.addEventListener("click", () => {
      if(!revealed) return;
      playNo1();
      updateScorePill();
      advance();
    });


    btnRestart.addEventListener("click", () => {
    // After the score screen, go to the "Best News Ever" page
    headerTitle.textContent = "Next";
    progressPill.textContent = "";
    showScreen("bestnews");
    });

    btnBestNews.addEventListener("click", () => {
    // Open the gospel page
    window.location.href = "https://www.eatyourbible.com/gospel";
    });

    btnBackToTitle.addEventListener("click", () => {
    // Go back to the very beginning
    idx = 0;
    correct = 0;
    updateScorePill();
    progressPill.textContent = "Ready";
    headerTitle.textContent = "Ten Commandments";
    showScreen("splash");
    });


    // Initial view
    showScreen("splash");
    updateScorePill();
  </script>
</body>
</html>
